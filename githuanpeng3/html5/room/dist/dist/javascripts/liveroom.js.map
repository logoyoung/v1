{"version":3,"sources":["../../javascripts/liveroom.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","$","END_FIXED","HEART_CONTENT","HEART_TIMER","LINK_TIMER","COMMAND_MAP","DEFAULT_MESS_MAP","SOCKET_CODE_MAP","ROOM_CODE_ERROR","webSocketUrl","giftList","ROOM","value","chat_ms_check","a","content","enc","command","data","recive_ms_decode","chat_ms_trans","_data","base64","decode","d","toJSON","t","eval","welcome","uid","ROOMID","nn","console","log","tpl","welcomeDom","append","domScroll","msgShow","msgDom","giftMsg","giftDom","silenceMsg","silenceDom","userExit","follow","followDom","share","treasureopen","sendTheAir","liveNotice","liveStop","liveEnding","killUser","liveStart","anchorStart","liveEnd","setTimeout","location","href","rRankList","sendCallBack","e","mobileTips","sendBeanCallBack","setProperty","sendGiftCallBack","succEnterCallBack","userLvIcon","userGroup","sayUser","sayMessage","sendUser","sendContent","sendTimes","followUser","silenceM","connect","webSocket","WebSocket","onopen","LOGIN_MESSAGE","UID","ENCPASS","send","onclose","onerror","onmessage","mes","QuerySocketStr","includes","openLock","heartBeat","HEART_MESSAGE","setInterval","on","loginEvent","messageContent","val","send_ms_encode","hide","removeClass","blur","gid","attr","num","send_gift_encode","giftLock","beanLock","geetestLock","beanTime","bean_level","LIVEID","$ROOM","config","getCookie","QueryLocation","luid","u","liveid","requestUrl","$conf","api","requestData","encpass","ajaxRequest","url","responseData","liveID","index","parseInt","Math","random","toFixed","web_socket","LiveRoom","init","desc","initInfo","html","title","document","isLiving","find","show","addClass","anchor","head","poster","orientation","level","nick","numberFormat","viewCount","gameName","followStatus","isFollow","initUserInfo","initStream","user","userInfo","hpbean","hpcoin","setUserCoin","setUserBean","status","stream","streamFix","streamList","waitStream","streamIndex","indexOf","oldUrl","substr","rep","RegExp","successUrl","replace","m3u8URL","video","enableInlineVideo","play","_initLogin","_initLayer","_initBindVideoEvent","_initVideoPlayAddress","_initChangeView","_initAnchorInfo","_initBindChatEvent","_initBeanTime","_initBindBeanEvent","_initBindGiftEvent","bindGesture","preventDefault","history","window","domain","go","swiper","Swiper","pagination","emojiIndex","textObj","get","all","createTextRange","caretPos","text","charAt","setSelectionRange","rangeStart","selectionStart","rangeEnd","selectionEnd","tempStr1","substring","tempStr2","focus","len","navigator","userAgent","match","webkitEnterFullScreen","tap","videoBar","videoPlayBtn","css","hasClass","pause","size","htmlArr","list","resList","push","CreateDom","item","userCount","luids","requsetData","event","lvl","time","timeSort","dom","minute","second","geetest","product","extend","vcode","type","recieve_bean","revCount","client","CreateLi","obj","id","giftname","cost","unit","giftEvent","ulContainer","lists","listLen","ulNum","ceil","j","listOne","k","eq","splice","swiperGift","send_bean_encode","identity","str_encode","str","msg","toUnicode","mid","Date","getTime","way","compress","String_fixed","recive_str","zip_inflate","group","uGp","cunn","toEncode","replace_em","word","ounn","gname","giftIcon","timer","gnum","admin","adminNick","targetNick","fn","scrollTo","options","defaults","toT","scrollHeight","durTime","delay","callback","opts","_this","curTop","scrollTop","subTop","dur","round","smoothScroll","per","clearInterval","remove","digitsFormat","coin","bean","b","interval"],"mappings":"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","file":"liveroom.js","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** Created by junxiao on 2017/7/28. */\n$(function () {\n    var END_FIXED = '\\r\\n';\n    var HEART_CONTENT = 'y8vPLwAA'; // 心跳码\n    var HEART_TIMER = 15 * 1000; //15s 正常16s 发送心跳、避免延迟 提高一秒\n    var LINK_TIMER = 5 * 1000; //5000ms 重连\n    var COMMAND_MAP = {\n        'result': 'sendCallback',\n        'receivemessage': 'receiveMessage',\n        'network.error': 'netError',\n        'SecurityError': 'securityError'\n    };\n    var DEFAULT_MESS_MAP = {\n        'login.success': '登陆成功',\n        'send.success': '发送成功'\n    };\n    var SOCKET_CODE_MAP = {\n        '501': 'welcome',\n        '502': 'msgShow',\n        '503': '',\n        '504': 'giftMsg',\n        '505': 'silenceMsg',\n        '506': 'userExit',\n        '507': 'follow', //关注\n        '508': 'share', //分享\n        '511': 'treasureopen',\n        '535': 'sendTheAir',\n        '540': 'liveNotice',\n        '541': 'liveStop',\n        '542': 'killUser',\n        '601': 'liveStart',\n        '602': 'liveEnd',\n        '701': 'rRankList',\n        '1100': 'sendCallBack',\n        '1102': 'sendBeanCallBack',\n        '1103': 'sendGiftCallBack',\n        '1104': 'succEnterCallBack'\n    };\n    var ROOM_CODE_ERROR = {\n        '-31': \"用户欢朋币余额不足\",\n        '-32': \"用户欢朋豆余额不足\",\n        '-33': \"尚未认证手机\",\n        '-3001': '聊天室初始化失败',\n        '-3002': \"聊天室进入失败\",\n        '-3003': \"聊天室退出失败\",\n        '-3004': \"聊天室心跳失败\",\n        '-3005': \"聊天室消息类型非法\",\n        '-3006': \"聊天室消息发送失败\",\n        '-3007': \"聊天室点赞失败\",\n        '-3008': \"聊天室游客不能说话\",\n        '-3009': \"用户被禁言，不能发言\",\n        '-3501': \"消息表写入失败\",\n        '-3502': \"用户发言失败\",\n        '-3503': \"获取发言用户信息失败\",\n        '-3504': \"获取直播信息失败\",\n        '-3505': \"更新直播赞失败\",\n        '-3506': \"点赞消息发送失败\",\n        '-3507': \"获取主播信息失败\",\n        '-3508': \"礼物全局通知信息发送失败\",\n        '-3509': \"礼物房间信息发送失败\",\n        '-3510': \"服务器繁忙\",\n        '-3511': \"送礼请求参数错误\",\n        '-3512': \"输入字符不能为空\",\n        '-3513': \"输入字符不能超过20个字\",\n        '-3530': \"输入字符含有敏感词汇\"\n    };\n    var webSocketUrl = '';\n    var giftList = {};\n    /**\n     * ROOM 工具类\n     */\n\n    var ROOM = function () {\n        function ROOM() {\n            _classCallCheck(this, ROOM);\n        }\n\n        _createClass(ROOM, null, [{\n            key: 'chat_ms_check',\n            value: function chat_ms_check(a) {\n                if (!DEFAULT_MESS_MAP[a.content]) {\n                    if (a.enc == 'no' && COMMAND_MAP[a.command]) {\n                        return;\n                    }\n                    // (解密 socket)\n                    if (a.command == 'receivemessage' && a.content) {\n                        if (a.enc == 'yes') {\n                            var data = recive_ms_decode(a.content);\n                            //需 func 处理 JSON串\n                            this.chat_ms_trans(data);\n                        } else if (a.enc == 'no') {\n                            var _data = base64.decode(a.content);\n                            this.chat_ms_trans(_data);\n                        }\n                    }\n                }\n            }\n        }, {\n            key: 'chat_ms_trans',\n            value: function chat_ms_trans(d) {\n                if (d) {\n                    var data = toJSON(d);\n                    if (SOCKET_CODE_MAP[data.t]) {\n                        eval('this.' + SOCKET_CODE_MAP[data.t] + '(' + d + ')');\n                    } else {}\n                }\n            }\n        }, {\n            key: 'welcome',\n            value: function welcome(d) {\n                if (d.uid == ROOMID || d.nn == '') {\n                    return;\n                }\n                console.log(d);\n                var tpl = ROOM.welcomeDom(d);\n                $('#chat-div').append(tpl);\n                domScroll();\n            }\n        }, {\n            key: 'msgShow',\n            value: function msgShow(d) {\n                /*if (!barragerLock) {\n                 createBarrager(toEncode(d.msg));\n                 }*/\n                console.log(d);\n                var tpl = ROOM.msgDom(d);\n                $('#chat-div').append(tpl);\n                domScroll();\n            }\n        }, {\n            key: 'giftMsg',\n            value: function giftMsg(d) {\n                //手机 房管 Level 身份标识  msgid  wait\n                console.log(d);\n                var tpl = ROOM.giftDom(d);\n                $('#chat-div').append(tpl);\n                domScroll();\n            }\n        }, {\n            key: 'silenceMsg',\n            value: function silenceMsg(d) {\n                console.log(d);\n                var tpl = ROOM.silenceDom(d);\n                $('#chat-div').append(tpl);\n                domScroll();\n            }\n        }, {\n            key: 'userExit',\n            value: function userExit(d) {/*console.log('one person exit');*/}\n        }, {\n            key: 'follow',\n            value: function follow(d) {\n                console.log(d);\n                var tpl = ROOM.followDom(d);\n                $('#chat-div').append(tpl);\n                domScroll();\n            }\n        }, {\n            key: 'share',\n            value: function share(d) {\n                console.log(d);\n            }\n        }, {\n            key: 'treasureopen',\n            value: function treasureopen(d) {\n                // console.log(d);\n                //宝箱开启 暂无\n            }\n        }, {\n            key: 'sendTheAir',\n            value: function sendTheAir(d) {\n                //console.log(d);\n                //送飞船动画 暂无\n            }\n        }, {\n            key: 'liveNotice',\n            value: function liveNotice(d) {\n                //console.log(d);\n                //H5直播提示 暂无\n            }\n        }, {\n            key: 'liveStop',\n            value: function liveStop(d) {\n                console.log(d);\n                ROOM.liveEnding();\n            }\n        }, {\n            key: 'killUser',\n            value: function killUser(d) {\n                console.log(d);\n                ROOM.liveEnding();\n            }\n        }, {\n            key: 'liveStart',\n            value: function liveStart(d) {\n                console.log(d);\n                ROOM.anchorStart();\n            }\n        }, {\n            key: 'liveEnd',\n            value: function liveEnd(d) {\n                console.log(d);\n                var tpl = ROOM.liveEnding();\n                $('#chat-div').append(tpl);\n                domScroll();\n                setTimeout(function () {\n                    location.href = location.href;\n                    //config();\n                }, 3000);\n            }\n        }, {\n            key: 'rRankList',\n            value: function rRankList(d) {\n                console.log(d);\n                //排行榜暂无\n            }\n        }, {\n            key: 'sendCallBack',\n            value: function sendCallBack(d) {\n                console.log(d);\n                if (ROOM_CODE_ERROR[d.e]) {\n                    mobileTips(ROOM_CODE_ERROR[d.e], 3);\n                }\n            }\n        }, {\n            key: 'sendBeanCallBack',\n            value: function sendBeanCallBack(d) {\n                //giftLock = false;\n                console.log(d);\n                setProperty(d);\n                if (ROOM_CODE_ERROR[d.e]) {\n                    mobileTips(ROOM_CODE_ERROR[d.e], 3);\n                }\n            }\n        }, {\n            key: 'sendGiftCallBack',\n            value: function sendGiftCallBack(d) {\n                //giftLock = false;\n                console.log(d);\n                setProperty(d);\n                if (ROOM_CODE_ERROR[d.e]) {\n                    mobileTips(ROOM_CODE_ERROR[d.e], 3);\n                }\n            }\n        }, {\n            key: 'succEnterCallBack',\n            value: function succEnterCallBack(d) {\n                console.log(d);\n            }\n        }, {\n            key: 'welcomeDom',\n            value: function welcomeDom(d) {\n                return '<li class=\"chat-cell\"><img class=\"welcome\" src=\"images/emoji/welcome.png\"><span class=\"text\">&nbsp;欢迎&nbsp;</span>' + userLvIcon(d) + '<span class=\"person-name normal\">' + d.nn + '</span><span class=\"text\">&nbsp;进入直播间</span></li>';\n            }\n        }, {\n            key: 'msgDom',\n            value: function msgDom(d) {\n                return '<li class=\"chat-cell\">' + userGroup(d) + userLvIcon(d) + sayUser(d) + sayMessage(d) + '</li>';\n            }\n        }, {\n            key: 'giftDom',\n            value: function giftDom(d) {\n                return '<li class=\"chat-cell\">' + userGroup(d) + userLvIcon(d) + sendUser(d) + sendContent(d) + sendTimes(d) + '</li>';\n            }\n        }, {\n            key: 'followDom',\n            value: function followDom(d) {\n                return '<li class=\"chat-cell\">' + userGroup(d) + userLvIcon(d) + followUser(d) + '</li>';\n            }\n        }, {\n            key: 'silenceDom',\n            value: function silenceDom(d) {\n                return '<li class=\"chat-cell\" style=\"color:#f44336;\">' + silenceM(d) + '</li>';\n            }\n        }, {\n            key: 'liveEnding',\n            value: function liveEnding() {\n                return '<li class=\"chat-cell\" style=\"color:#f44336;\"><span class=\"message\" style=\"color:#f44336;\">系统广播：直播结束</span></li>';\n            }\n        }, {\n            key: 'anchorStart',\n            value: function anchorStart() {\n                location.href = location.href;\n                //config();\n            }\n        }]);\n\n        return ROOM;\n    }();\n\n    var connect = function connect() {\n        //websocket Events override\n        var webSocket = new WebSocket(webSocketUrl);\n        webSocket.onopen = function (e) {\n            console.log('与服务器端建立连接');\n            var LOGIN_MESSAGE = 'command=login' + END_FIXED + 'uid=' + UID + END_FIXED + 'encpass=' + ENCPASS + END_FIXED + 'roomid=' + ROOMID + END_FIXED;\n            //尝试登陆\n            webSocket.send(LOGIN_MESSAGE);\n        };\n        webSocket.onclose = function (e) {\n            setTimeout(function () {\n                connect();\n                console.log('正在重连...');\n            }, LINK_TIMER);\n            console.log('链接已断开');\n        };\n        webSocket.onerror = function (e) {\n            connect();\n        };\n        webSocket.onmessage = function (e) {\n            var mes = QuerySocketStr(e.data);\n            if (mes.content.includes('login.success')) {\n                openLock = true;\n                webSocket.heartBeat();\n            } else if (mes.content.includes('login.fail')) {\n                openLock = false;\n                webSocket.onclose();\n            }\n            ROOM.chat_ms_check(mes);\n        };\n        //heartbeat WebSocket心跳\n        webSocket.heartBeat = function (e) {\n            var HEART_MESSAGE = 'command=sendmessage' + END_FIXED + 'content=' + HEART_CONTENT + END_FIXED;\n            setInterval(function () {\n                webSocket.send(HEART_MESSAGE);\n            }, HEART_TIMER);\n        };\n\n        // 发送消息\n        $('#sendMessage-btn').on('tap', function () {\n            if (!loginEvent()) {\n                return;\n            }\n\n            var messageContent = $('#message-content');\n            var value = messageContent.val();\n            if (value != '') {\n\n                /***/\n                webSocket.send(send_ms_encode(value));\n                $('.mask').hide() && $('.chat-box, .body').removeClass('int') && $('.chat-btn .input').blur() && $('#message-content').val('');\n            } else {\n                return;\n            }\n        });\n        //送礼\n        $('.lw_item').on('tap', function () {\n            if (!loginEvent()) {\n                return;\n            }\n            var gid = $(this).attr('data-gid') ? $(this).attr('data-gid') : null;\n            var num = $(this).attr('data-num') ? $(this).attr('data-num') : 1;\n            if (gid && num) {\n                webSocket.send(send_gift_encode(gid, num));\n                //giftLock = true;\n            }\n        });\n    };\n\n    /**\n     *@param: 礼物锁、socket锁\n     */\n    var giftLock = false,\n        openLock = false,\n        beanLock = false,\n        geetestLock = false,\n        beanTime = 0,\n        bean_level = 1,\n        UID = null,\n        ENCPASS = null,\n        ROOMID = null,\n        LIVEID = null,\n        $ROOM = null;\n    //配置UID ENC LUID等变量\n    var config = function config() {\n        UID = getCookie('_uid') || 3000000000;\n        ENCPASS = getCookie('_enc') || 'gustuserenterencpass';\n        ROOMID = QueryLocation().luid || QueryLocation().u || ''; //luid = ROOMID\n        LIVEID = QueryLocation().liveid || '';\n        if (ROOMID == '') {\n            return;\n        }\n        var requestUrl = $conf.api + 'room/getLiveRoomInfo.php';\n        var requestData = {\n            uid: getCookie('_uid') || '',\n            encpass: getCookie('_enc') || '',\n            luid: ROOMID\n        };\n        ajaxRequest({ url: requestUrl, data: requestData }, function (responseData) {\n            console.log(responseData);\n            /*if(IsPC()){\n                location.href = $conf.domain + responseData.roomID;\n                return;\n            }*/\n            $ROOM = responseData;\n            ROOMID = $ROOM.luid; //覆盖ROOMID\n            LIVEID = $ROOM.liveID; //覆盖LIVEID\n            var index = parseInt(Math.random().toFixed(0));\n            console.log('webSoket[' + index + ']');\n            if (!$ROOM.web_socket[index]) {\n                webSocketUrl = 'ws://' + $ROOM.web_socket[0];\n            } else {\n                webSocketUrl = 'ws://' + $ROOM.web_socket[index];\n            }\n\n            LiveRoom.init();\n        }, function (responseData) {\n            mobileTips(responseData.desc, 3);\n        });\n    };\n    //初始化 房间信息\n    var initInfo = function initInfo() {\n\n        //初始化标题\n        $('header>span').html($ROOM.title);\n        document.title = $ROOM.title;\n        //初始化 直播状态及封面图\n        if ($ROOM.isLiving == '0') {\n            $('.liveroom-content').find('.play-btn').hide();\n            $('.liveroom-content').find('.nolive').show();\n\n            $('.liveroom-content').find('.poster').show().addClass('filter').attr('src', $ROOM.anchor.head);\n        } else if ($ROOM.isLiving == '1') {\n            $('.liveroom-content').find('.nolive').hide();\n            $('.liveroom-content').find('.play-btn').show();\n            $('.liveroom-content>.video').attr('poster', $ROOM.poster);\n            if ($ROOM.orientation == '0' && $ROOM.poster != '') {\n                $('.liveroom-content').find('.poster').removeClass('filter').removeClass('landscape').addClass('portrait').attr('src', $ROOM.poster);\n            } else if ($ROOM.orientation == '1' && $ROOM.poster != '') {\n                $('.liveroom-content').find('.poster').removeClass('filter').removeClass('portrait').addClass('landscape').attr('src', $ROOM.poster);\n            } else {\n                $('.liveroom-content').find('.poster').hide();\n            }\n        }\n\n        //初始化 主播信息\n        //头像\n        $('.anchor-info').find('.room-head').attr('src', $ROOM.anchor.head);\n        //昵称\n        $('.anchor-info').find('.anchor-desc').html('<span class=\"ms-lv lv' + $ROOM.anchor.level + '\"></span><span class=\"room-title\">' + $ROOM.anchor.nick + '</span>');\n        //在线人数\n        $('.anchor-info').find('#viewCount').html(numberFormat($ROOM.viewCount));\n        //直播游戏名称\n        $('.anchor-info').find('.room-game').html($ROOM.gameName);\n        //初始化 关注状态\n        followStatus($ROOM.isFollow);\n        //初始化 个人信息\n        initUserInfo($ROOM);\n        //初始化 流地址\n        initStream(ROOMID);\n    };\n\n    //初始化 个人信息\n    var initUserInfo = function initUserInfo(a) {\n        if (!a || !a.user || !getCookie('_uid') || !getCookie('_enc')) {\n            return;\n        }\n        var userInfo = a.user;\n        if (userInfo.hpbean && userInfo.hpcoin) {\n            setUserCoin(userInfo.hpcoin);\n            setUserBean(userInfo.hpbean);\n            $('.gift-content').find('.userMoney').addClass('show');\n        }\n    };\n\n    //初始化 流地址\n    var initStream = function initStream(ROOMID, status) {\n        var requestUrl = $conf.api + 'live/getHlsStreamList.php';\n        var requestData = {\n            luid: ROOMID\n        };\n        ajaxRequest({ url: requestUrl, data: requestData }, function (responseData) {\n            if (responseData.stream != '') {\n                //流地址前缀\n                var streamFix = responseData.streamList[0] + '/';\n                //待拼接流地址\n                var waitStream = responseData.stream;\n                //找到拼接位置\n                var streamIndex = responseData.stream.indexOf('?');\n                //待拼接内容\n                var oldUrl = responseData.stream.substr(0, streamIndex);\n                var rep = new RegExp(oldUrl);\n                //替换地址\n                var successUrl = waitStream.replace(rep, oldUrl + '/playlist.m3u8');\n                //拼接\n                var m3u8URL = 'http://' + streamFix + successUrl;\n\n                $('.video').attr('src', m3u8URL);\n\n                if (status == 1) {\n                    var video = $('video')[0];\n                    enableInlineVideo(video);\n                    video.play();\n                    $('.video').addClass('play');\n                } else {\n                    return;\n                }\n            } else {\n                /* 下播状态 */\n\n            }\n        }, function (responseData) {\n            //error\n        });\n    };\n\n    // config => initGift =>webSocket => initInfo => initStream\n    //配置UID等 =>  socket服务登录 => 初始化房间信息 => 初始化 播放流地址\n    config();\n\n    var LiveRoom = {\n        init: function init() {\n            this._initLogin(); //登录\n            this._initLayer(); //界面\n            this._initBindVideoEvent(); //直播视频相关事件\n            this._initVideoPlayAddress(); //直播地址相关事件\n            this._initChangeView(); //聊天 评论View切换\n            this._initAnchorInfo(); //主播信息及事件\n            this._initBindChatEvent(); //聊天相关事件\n            this._initBeanTime();\n            this._initBindBeanEvent(); //领豆相关事件\n            this._initBindGiftEvent(); //送礼相关事件\n        },\n        _initLogin: function _initLogin() {},\n        _initLayer: function _initLayer() {\n            //返回上层页面\n            bindGesture($('#backToView'), function (e) {\n                //touchstart\n                e.preventDefault();\n                $(this).removeClass('normal').addClass('high');\n            }, function () {\n                $(this).removeClass('high').addClass('normal');\n            }, function () {\n                if (history.length == 1 || window.history.length == 1) {\n                    location.href = $conf.domain + 'mobile/index.html';\n                } else {\n                    window.history.go(-1);\n                }\n            });\n\n            //emoji\n            var swiper = new Swiper('.emoji-container', {\n                pagination: '.swiper-pagination'\n            });\n            //emoji int\n            $('#emoji-content').find('.emoji').on('tap', function () {\n                var index = $(this).index() + 1;\n                var emojiIndex = '[em_' + index + ']';\n\n                var textObj = $('#message-content').get(0);\n                if (document.all && textObj.createTextRange && textObj.caretPos) {\n                    var caretPos = textObj.caretPos;\n                    caretPos.text = caretPos.text.charAt(caretPos.text.length - 1) == '' ? emojiIndex + '' : emojiIndex;\n                } else if (textObj.setSelectionRange) {\n                    var rangeStart = textObj.selectionStart;\n                    var rangeEnd = textObj.selectionEnd;\n                    var tempStr1 = textObj.value.substring(0, rangeStart);\n                    var tempStr2 = textObj.value.substring(rangeEnd);\n                    textObj.value = tempStr1 + emojiIndex + tempStr2;\n                    textObj.focus();\n                    var len = emojiIndex.length;\n                    textObj.setSelectionRange(rangeStart + len, rangeStart + len);\n                    textObj.blur();\n                } else {\n                    textObj.value += emojiIndex;\n                }\n            });\n        },\n        _initBindVideoEvent: function _initBindVideoEvent() {\n            //播放 按钮 事件\n            bindGesture($('.liveroom-content>.play-btn'), function (e) {\n                //touchstart\n                e.preventDefault();\n                $(this).removeClass('normal').addClass('high');\n            }, function () {\n                //touchend\n                $(this).removeClass('high').addClass('normal');\n            }, function () {\n                //tap\n                $('.liveroom-content>.video')[0].play();\n                $('.video').addClass('play');\n                if (window.navigator.userAgent.match(/OS [9]_\\d[_\\d]* like Mac OS X/i) || window.navigator.userAgent.match(/OS [8]_\\d[_\\d]* like Mac OS X/i)) {\n                    $('.liveroom-content>.video')[0].play();\n                    $('.video').addClass('play');\n                    $('.liveroom-content>.video')[0].webkitEnterFullScreen();\n                }\n                setTimeout(function () {\n                    $('.liveroom-content>.play-btn').hide();\n                    $('.video-bar').addClass('show');\n                    setTimeout(function () {\n                        $('.video-bar').removeClass('show');\n                    }, 5000);\n                    $('.liveroom-content>.poster').hide();\n                }, 1000);\n            });\n\n            //video-bar display\n            $('.liveroom-content>.video').tap(function () {\n                var videoBar = $('.video-bar');\n                var videoPlayBtn = $('.liveroom-content>.play-btn');\n                if (videoPlayBtn.css('display') == 'none') {\n                    videoBar.hasClass('show') ? videoBar.removeClass('show') : videoBar.addClass('show') && setTimeout(function () {\n                        videoBar.removeClass('show');\n                    }, 5000);\n                }\n            });\n\n            //video pause\n            bindGesture($('.video-bar>.video-pause'), function (e) {\n                //touchstart\n                e.preventDefault();\n                $(this).removeClass('normal').addClass('high');\n            }, function () {\n                //touchend\n                $(this).removeClass('high').addClass('normal');\n            }, function () {\n                //tap\n                $('.liveroom-content>.video')[0].pause();\n                $('.video-bar').removeClass('show') && $('.play-btn').show();\n            });\n\n            $('.video-refresh').on('tap', function () {\n                initStream(ROOMID, 1);\n            });\n\n            //video webkit-fullscreen\n            bindGesture($('.video-bar>.video-full'), function (e) {\n                //touchstart\n                e.preventDefault();\n                $(this).removeClass('normal').addClass('high');\n            }, function () {\n                //touchend\n                $(this).removeClass('high').addClass('normal');\n            }, function () {\n                //tap\n                $('.liveroom-content>.video')[0].webkitEnterFullScreen();\n            });\n        },\n        _initVideoPlayAddress: function _initVideoPlayAddress() {\n            var video = $('video').get(0);\n            enableInlineVideo(video);\n        },\n        _initChangeView: function _initChangeView() {\n            // 聊天 推荐 下划线 事件添加\n            $('#chatView-btn').on('tap', function () {\n                $('.sec-box li span').removeClass('sel');\n                $(this).addClass('sel');\n                $('.commend-selbox').hide() && $('.chat-selbox, .chat-box').show();\n            });\n            $('#commendView-btn').on('tap', function () {\n                $('.sec-box li span').removeClass('sel');\n                $(this).addClass('sel');\n                $('.chat-selbox, .chat-box').hide() && $('.commend-selbox').show();\n                if ($('.commend-selbox .live-list').find('.live-one').length == 0) {\n                    var requestUrl = $conf.api + 'other/guessYouLike.php';\n                    var requestData = {\n                        uid: getCookie('_uid') || '',\n                        encpass: getCookie('_enc') || '',\n                        size: 6\n                    };\n                    var htmlArr = [];\n                    ajaxRequest({ url: requestUrl, data: requestData }, function (responseData) {\n                        if (responseData.list && responseData.list.length > 0) {\n                            $('.commend-selbox .commend-title').show();\n                        }\n                        var resList = responseData.list;\n                        console.log(resList);\n                        for (var i = 0; i < resList.length; i++) {\n                            htmlArr.push(CreateDom(resList[i]));\n                        }\n\n                        $('.commend-selbox').find('.live-list').html(htmlArr);\n                    }, function (responseData) {\n                        mobileTips(responseData.desc, 3);\n                    });\n                    $('.commend-selbox .live-list').html(htmlArr);\n                }\n            });\n\n            function CreateDom(item) {\n                if (item.uid == ROOMID) {\n                    return '';\n                }\n                if (item.orientation == 1) {\n                    return '<li class=\"live-one\">\\\n                            <a href=\"' + $conf.domain + 'mobile/room/room.html?luid=' + item.uid + '\">\\\n                            <div class=\"poster\">\\\n                            <div class=\"snapshot\">\\\n                            <img class=\"horizontal\" src=\"' + item.poster + '\">\\\n                            <p class=\"game-title\">' + item.gameName + '</p>\\\n                        </div>\\\n                        <div class=\"profile-photo\">\\\n                            <img src=\"' + item.head + '\">\\\n                            </div>\\\n                            <div class=\"poster-info\">\\\n                            <p class=\"poster-name\">' + numberFormat(item.userCount) + '人</p>\\\n                        <p class=\"audience\">' + item.title + '</p>\\\n                        </div>\\\n                        <section class=\"room-name\">' + item.nick + '</section>\\\n                        </div>\\\n                        </a>\\\n                        </li>';\n                } else {\n                    return '<li class=\"live-one\">\\\n                            <a href=\"' + $conf.domain + 'mobile/room/room.html?luid=' + item.uid + '\">\\\n                            <div class=\"poster\">\\\n                            <div class=\"snapshot\">\\\n                            <img class=\"vertical\" src=\"' + item.poster + '\">\\\n                            <p class=\"game-title\">' + item.gameName + '</p>\\\n                        </div>\\\n                        <div class=\"profile-photo\">\\\n                            <img src=\"' + item.head + '\">\\\n                            </div>\\\n                            <div class=\"poster-info\">\\\n                            <p class=\"poster-name\">' + numberFormat(item.userCount) + '人</p>\\\n                        <p class=\"audience\">' + item.title + '</p>\\\n                        </div>\\\n                        <section class=\"room-name\">' + item.nick + '</section>\\\n                        </div>\\\n                        </a>\\\n                        </li>';\n                }\n            }\n        },\n        _initAnchorInfo: function _initAnchorInfo() {\n            //主播信息 按钮 事件\n            bindGesture($('.anchor-display'), function (e) {\n                //touchstart\n                e.preventDefault();\n                $('.anchor-info').hasClass('none') ? $(this).removeClass('hide').addClass('hide-high') : $(this).removeClass('show').addClass('show-high');\n            }, function () {\n                //touchend\n                $('.anchor-info').hasClass('none') ? $(this).removeClass('hide').addClass('hide-high') : $(this).removeClass('show-high').addClass('show');\n            }, function () {\n                //tap\n                $('.anchor-info').hasClass('none') ? $('.anchor-info, .chat-container').removeClass('none') && $(this).removeClass('hide').removeClass('hide-high').addClass('show') : $('.anchor-info, .chat-container').addClass('none') && $(this).removeClass('show').removeClass('show-high').addClass('hide');\n            });\n            //关注主播 按钮事件\n            $('.follow-btn').on('tap', function () {\n                if (!loginEvent()) {\n                    return;\n                    //立即登录\n                }\n                if (UID && ENCPASS && ROOMID) {\n                    var requestUrl = '';\n                    if (!$(this).hasClass('cancel')) {\n                        requestUrl = $conf.api + 'room/followUser.php';\n                        var requestData = {\n                            uid: UID,\n                            encpass: ENCPASS,\n                            luid: ROOMID\n                        };\n                        ajaxRequest({ url: requestUrl, data: requestData }, function (responseData) {\n                            followStatus(1);\n                        });\n                    } else {\n                        requestUrl = $conf.api + 'room/followUserCancel.php';\n                        var requestData = {\n                            uid: UID,\n                            encpass: ENCPASS,\n                            luids: ROOMID\n                        };\n                        ajaxRequest({ url: requestUrl, data: requestData }, function (responseData) {\n                            followStatus(0);\n                        });\n                    }\n                } else {\n                    //else login\n                }\n            });\n        },\n        _initBindChatEvent: function _initBindChatEvent() {\n            //聊天 按钮事件\n            bindGesture($('.chat-btn .input'), function (e) {\n                //touchstart\n                e.preventDefault();\n                $(this).removeClass('normal').addClass('high');\n            }, function () {\n                //touchend\n                $(this).removeClass('high').addClass('normal');\n                $('.emoji-content').hasClass('show') ? $('.emoji-content').removeClass('show') : '';\n                $(this).focus() && $('.mask').show();\n            }, function () {\n                //tap\n                $(this).focus();\n            });\n\n            $('.chat-btn .input').focus(function () {\n                $('.chat-box ,.body').addClass('int');\n            }).blur(function () {\n                $('.body').removeClass('int');\n            });\n            //mask 取消input事件\n            $('.mask').on('tap', function () {\n                $(this).hide() && $('.chat-box, .body').removeClass('int') && $('.chat-btn .input').blur();\n            });\n\n            $('#emoji-content .delete-btn').on('tap', function () {\n                $('#message-content').val('');\n            });\n\n            //emoji 按钮事件\n            bindGesture($('.emoji-btn'), function (e) {\n                e.preventDefault();\n            }, function () {}, function () {\n                if (!$('.emoji-content').hasClass('show')) {\n                    $('.emoji-content').addClass('show') && $('.chat-btn .input').blur();\n                } else {\n                    $('.emoji-content').removeClass('show') && $('.chat-btn .input').focus();\n                }\n            });\n        },\n        _initBeanTime: function _initBeanTime() {\n            if (!getCookie('_uid') || !getCookie('_enc')) {\n                return;\n            }\n            var requestUrl = $conf.api + 'room/shamApi_gb_enter.php';\n            var requsetData = {\n                uid: getCookie('_uid'),\n                encpass: getCookie('_enc'),\n                luid: ROOMID,\n                event: 'enter'\n            };\n            ajaxRequest({ url: requestUrl, data: requsetData }, function (responseData) {\n                console.log(responseData);\n                bean_level = responseData.lvl;\n                if (bean_level == 6) {\n                    return;\n                }\n                if (responseData.time > 0) {\n                    beanLock = false;\n                    beanTime = responseData.time;\n                    timeSort();\n                } else {\n                    beanLock = true;\n                }\n            }, function (responseData) {\n                mobileTips(responseData.desc, 3);\n            });\n        },\n        _initBindBeanEvent: function _initBindBeanEvent() {\n            //领豆 按钮事件\n            bindGesture($('.bean-btn'), function (e) {\n                //touchstart\n                e.preventDefault();\n                $(this).removeClass('normal').addClass('high');\n            }, function () {\n                //touchend\n                $(this).removeClass('high').addClass('normal');\n            }, function () {\n                console.log(beanLock);\n                if (!loginEvent()) {\n                    return;\n                }\n                if (bean_level == 6) {\n                    var dom = '已经领取6次咯~';\n                    mobileTips(dom, 3);\n                    return;\n                }\n                if (!beanLock && beanTime > 0) {\n                    var minute = parseInt(beanTime / 60);\n                    var second = parseInt(beanTime % 60);\n\n                    if (minute > 0) {\n                        var time = minute + ' 分钟后可领取';\n                        mobileTips(time, 1);\n                        return;\n                    } else {\n                        var time = second + ' 秒钟后可领取';\n                        mobileTips(time, 1);\n                        return;\n                    }\n                } else {\n                    if (!loginEvent()) {\n                        return;\n                    }\n                    if (!geetestLock || $('.gt_holder').hasClass('gt_hide')) {\n                        geetestLock = true;\n                        geetest({ product: 'popup', append: '#geetest' }, function (data) {\n                            geetestLock = false;\n                            var requestData = $.extend({\n                                uid: getCookie('_uid'),\n                                encpass: getCookie('_enc'),\n                                luid: ROOMID,\n                                event: 'pick',\n                                lvl: bean_level,\n                                vcode: 0,\n                                type: 'gt'\n                            }, data);\n\n                            var requestUrl = $conf.api + 'room/shamApi_gb_enter.php';\n                            ajaxRequest({ url: requestUrl, data: requestData }, function (responseData) {\n                                console.log(responseData);\n                                var recieve_bean = '领取了 <span>' + responseData.revCount + '</span> 个欢朋豆';\n                                mobileTips(recieve_bean, 2);\n                                setProperty(responseData);\n                                bean_level = responseData.lvl;\n                                beanTime = responseData.time;\n                                timeSort();\n                                beanLock = false;\n                            }, function (responseData) {\n                                mobileTips(responseData.desc, 3);\n                            });\n                        });\n                    } else {\n                        return;\n                    }\n                }\n            });\n        },\n        _initBindGiftEvent: function _initBindGiftEvent() {\n            //initGift List\n            var requestUrl = $conf.api + 'gift/getGiftShowList.php';\n            var requestData = {\n                client: 1,\n                luid: ROOMID\n            };\n            var CreateLi = function CreateLi(obj) {\n                return '<li class=\"lw_item\" data-gid=\"' + obj.id + '\" data-num=\"' + obj.num + '\">\\\n                          <div class=\"img\">\\\n                            <img src=\"' + obj.poster + '\">\\\n                            </div>\\\n                            <p class=\"desc\">' + obj.giftname + '</p>\\\n                            <p class=\"price\">' + obj.cost + obj.unit + '</p>\\\n                        </li>';\n            };\n            var giftEvent = function giftEvent(responseData) {\n                var htmlArr = [];\n                var ulContainer = '<ul class=\"gift-box\"></ul>';\n\n                var lists = responseData.list;\n                var listLen = responseData.list.length;\n\n                var ulNum = Math.ceil(listLen / 8);\n                for (var j = 0; j < ulNum; j++) {\n                    $('#gift-ul-con').append(ulContainer);\n                }\n\n                for (var i = 0; i < lists.length; i++) {\n                    var listOne = lists[i];\n                    giftList[listOne.id] = listOne.poster;\n                    htmlArr.push(CreateLi(listOne));\n                }\n\n                for (var k = 0; k < ulNum; k++) {\n                    $('#gift-ul-con').find('.gift-box').eq(0).html(htmlArr.splice(0, 8));\n                }\n                var swiperGift = new Swiper('.gift-container', {\n                    pagination: '.swiper-pagination'\n                });\n                // $('.gift-content').find('.gift-box').html(htmlArr);\n\n                connect();\n                initInfo();\n            };\n\n            ajaxRequest({ url: requestUrl, data: requestData }, function (responseData) {\n                giftEvent(responseData);\n            }, function (responseData) {\n                mobileTips(responseData.desc, 3);\n            });\n            //gift modal\n            $('.modal').on('tap', function () {\n                $(this).hide();\n                $('.gift-content').removeClass('show');\n            });\n            //送礼 按钮事件\n            bindGesture($('.gift-btn'), function (e) {\n                //touchstart\n                e.preventDefault();\n                $(this).removeClass('normal').addClass('high');\n            }, function () {\n                $(this).removeClass('high').addClass('normal');\n            }, function () {\n                $('.gift-content').addClass('show') && $('.modal').show();\n            });\n        }\n    };\n\n    /**\n     * [送礼 加密]\n     * @param  {[string]} gid [需加密文字]\n     */\n    function send_gift_encode(gid, num) {\n        //gid   礼物 个数 (gid 暂定31-39)\n        if (!gid || gid < 30 || gid > 40) {\n            return;\n        }\n        if (gid == '31' && num != '') {\n            return send_bean_encode(num);\n        }\n        if (!getCookie('_uid') || !getCookie('_enc')) {\n            return false;\n            /**/\n        }\n        var content = {\n            t: 103,\n            enc: ENCPASS,\n            gid: gid,\n            liveid: LIVEID,\n            identity: '1'\n        };\n        return str_encode(content);\n    }\n    function send_bean_encode(num) {\n        if (!num || num < 1 || num > 10000) {\n            return;\n        }\n        var content = {\n            t: 102,\n            enc: ENCPASS,\n            gid: '31', //欢朋豆 暂定 31\n            liveid: LIVEID,\n            num: num,\n            identity: '1'\n        };\n        return str_encode(content);\n    }\n    /**\n     * [发送消息 加密]\n     * @param  {[string]} str [需加密文字]\n     */\n    function send_ms_encode(str) {\n        if (!str) {\n            return;\n        }\n        if (!getCookie('_uid') || !getCookie('_enc')) {\n            return false;\n            /**/\n        }\n        var content = {\n            t: 100,\n            uid: UID,\n            msg: toUnicode(str),\n            mid: new Date().getTime(),\n            way: 0\n        };\n        return str_encode(content);\n    }\n    /**\n     * [接收消息 解密]\n     * @param  {[string]} str [需解密文字]\n     */\n    function recive_ms_decode(str) {\n        //解密\n        var compress = String_fixed(str, 'decode');\n        var recive_str = zip_inflate(base64.decode(compress));\n        return recive_str;\n    };\n    function userGroup(a) {\n        if (!a || !a.group) {\n            return;\n        }\n        var uGp = parseInt(a.group);\n        if (uGp == 1) {\n            return '';\n        } else if (uGp == 4) {\n            return '<span class=\"mg\">房管</span>';\n        } else if (uGp == 5) {\n            return '<span class=\"an\">主播</span>';\n        }\n    };\n    function userLvIcon(a) {\n        if (!a || !a.level) {\n            return;\n        }\n        return '<span class=\"us-lv lv' + a.level + '\"></span>';\n    };\n    function sayUser(a) {\n        if (!a || !a.cunn) {\n            return;\n        }\n        return '<span class=\"person-name normal\">' + a.cunn + ':</span>';\n    };\n    function sayMessage(a) {\n        if (!a || !a.msg) {\n            return;\n        }\n        return '<span class=\"message\">' + toEncode(replace_em(a.msg)) + '</span>';\n    };\n    function replace_em(str) {\n        str = str.replace(/\\</g, '&lt;');\n        str = str.replace(/\\>/g, '&gt;');\n        str = str.replace(/\\n/g, '<br/>');\n        str = str.replace(/\\[em_([0-9]*)\\]/g, function (word) {\n\n            var num = word.match(/\\d{1,2}/g);\n            num = num[0] ? num[0] : '';\n            var str = word;\n            num && num < 23 && (str = '<img class=\"emoji\" src=\"images/emoji/' + num + '.png\" >');\n            return str;\n        });\n        return str;\n    };\n    function sendUser(a) {\n        if (!a || !a.ounn) {\n            return;\n        }\n        return '<span class=\"person-name gift\">' + a.ounn + ':</span>';\n    };\n    function sendContent(a) {\n        //礼物img\n        return '<span class=\"message\"> 赠送给主播</span><span class=\"person-name gift\">' + a.gname + '</span>' + giftIcon(a) + '';\n    };\n    function giftIcon(a) {\n        if (!a || !a.gid) {\n            return;\n        }\n        // a.gid\n        return '<img class=\"img\" src=\"' + giftList[a.gid] + '\" >';\n    };\n    function sendTimes(a) {\n        var time = a.timer ? '<span class=\"message gift\">' + a.timer + '</span><span class=\"message fixed\">连击</span>' : '<span class=\"message gift\">' + a.gnum + '</span><span class=\"message fixed\">粒</span>';\n        return time;\n    };\n    function followUser(d) {\n        if (!d.nick || d.nick == '') {\n            return;\n        }\n        return '<span class=\"person-name normal\">' + d.nick + '</span><span class=\"message\">关注了主播</span>';\n    };\n    function followStatus(a) {\n        if (a == '1') {\n            $('.follow-btn').addClass('cancel').text('已关注');\n        } else {\n            $('.follow-btn').removeClass('cancel').text('关注');\n        }\n    };\n    function silenceM(a) {\n        if (!a || !a.admin || !a.adminNick) {\n            return;\n        }\n        return '<span class=\"message\" style=\"color:#f44336;\">系统广播：用户</span><span class=\"message\" style=\"color:#f44336;\">' + a.targetNick + '</span><span class=\"message\" style=\"color:#f44336;\">被房管</span><span class=\"message\" style=\"color:#f44336;\">' + a.adminNick + '</span><span class=\"message\" style=\"color:#f44336;\">禁言一小时</span>';\n    };\n    $.fn.scrollTo = function (options) {\n        var defaults = {\n            toT: $('.chat-container')[0].scrollHeight, //滚动目标位置\n            durTime: 1000, //过渡动画时间\n            delay: 10, //定时器时间\n            callback: function callback() {\n                return;\n            } //回调函数\n        };\n        var opts = $.extend(defaults, options),\n            timer = null,\n            _this = this,\n            curTop = _this.scrollTop(),\n            //滚动条当前的位置\n        subTop = opts.toT - curTop,\n            //滚动条目标位置和当前位置的差值\n        index = 0,\n            dur = Math.round(opts.durTime / opts.delay),\n            smoothScroll = function smoothScroll(t) {\n            index++;\n            var per = Math.round(subTop / dur);\n            if (index >= dur) {\n                _this.scrollTop(t);\n                window.clearInterval(timer);\n                if (opts.callback && typeof opts.callback == 'function') {\n                    opts.callback();\n                }\n                return;\n            } else {\n                _this.scrollTop(curTop + index * per);\n            }\n        };\n        timer = window.setInterval(function () {\n            smoothScroll(opts.toT);\n        }, opts.delay);\n        return _this;\n    };\n    function domScroll() {\n        $('.chat-container').scrollTo();\n        if ($('#chat-div').find('li').length > 88) {\n            $('#chat-div').find('li').eq(0).remove();\n        }\n        // $('.chat-container').scrollTop($('.chat-container')[0].scrollHeight);\n    };\n    /* 设置 金豆金币余额 */\n    function setUserCoin(a) {\n        $('.gift-content').find('.userMoney').find('.coinMoney').text(digitsFormat(a));\n    };\n    function setUserBean(a) {\n        $('.gift-content').find('.userMoney').find('.beanMoney').text(digitsFormat(a));\n    };\n    function setProperty(a) {\n        if (!a || !a.coin || !a.bean) {\n            return;\n        }\n        setUserCoin(a.coin);\n        setUserBean(a.bean);\n    };\n    /* mobileTips  1:loading 2:success 3:fail*/\n    function mobileTips(a, b) {\n        if (b == 1) {\n            $('.mobile-success, .mobile-fail').hide();\n            $('.mobile-loading .loading').html(a);\n            $('.mobile-tip, .mobile-loading').show();\n            setTimeout(function () {\n                $('.mobile-loading .loading').html('');\n                $('.mobile-tip, .mobile-loading').hide();\n            }, 1500);\n        } else if (b == 2) {\n            $('.mobile-loading, .mobile-fail').hide();\n            $('.mobile-success .success').html(a);\n            $('.mobile-tip, .mobile-success').show();\n            setTimeout(function () {\n                $('.mobile-success .success').html('');\n                $('.mobile-tip, .mobile-success').hide();\n            }, 1500);\n        } else if (b == 3) {\n            $('.mobile-success, .mobile-loading').hide();\n            $('.mobile-fail .fail').html(a);\n            $('.mobile-tip, .mobile-fail').show();\n            setTimeout(function () {\n                $('.mobile-fail .fail').html('');\n                $('.mobile-tip, .mobile-fail').hide();\n            }, 1500);\n        }\n    };\n    function timeSort() {\n        var interval = setInterval(function () {\n            if (beanTime <= 0) {\n                beanLock = true;\n                clearInterval(interval);\n                return;\n            }\n            beanTime--;\n            console.log(beanTime);\n        }, 1000);\n    };\n\n    /* not Login */\n    function loginEvent() {\n        if (!getCookie('_uid') || !getCookie('_enc')) {\n            mobileTips('您还没有登录哦~', 3);\n            setTimeout(function () {\n                location.href = $conf.domain + 'mobile/h5login/index.html?t=' + new Date().getTime();\n            }, 1200);\n            return false;\n        } else {\n            return true;\n        }\n    };\n});\n//# sourceMappingURL=liveroom.js.map"]}